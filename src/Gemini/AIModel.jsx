import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
  systemInstruction:
    "Generate Travel Plan for Location: Jaipur Rajasthan, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, description and suggest itinerary with PlaceName, Place details, Place Image url , Geo coordinates, ticket Priciing , Time t travel each of the location for 3days with each day plan with best time to visit in JSON format",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Jaipur Rajasthan, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, description and suggest itinerary with PlaceName, Place details, Place Image url , Geo coordinates, ticket Pricing, Rating , Time t travel each of the location for 3days with each day plan with best time to visit in JSON format",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "trip_details": {\n    "destination": "Jaipur, Rajasthan",\n    "duration": "3 Days",\n    "travelers": "Couple",\n    "budget": "Budget-Friendly"\n  },\n  "hotels": [\n    {\n      "hotelName": "Hotel Pearl Palace",\n      "address": "Near Sindhi Camp Bus Stand, Jaipur, Rajasthan 302001",\n      "price": "₹800 per night (approx.)",\n      "imageUrl": "https://example.com/hotelpearlplace.jpg",\n      "geoCoordinates": {\n        "latitude": 26.9220,\n        "longitude": 75.8099\n      },\n      "rating": 4.2,\n      "description": "A popular choice for budget travelers, offering clean rooms and helpful staff."\n    },\n    {\n      "hotelName": "Moustache Hostel Jaipur",\n      "address": "Near Gangauri Bazaar, Ghat Darwaza, Brahampuri, Jaipur, Rajasthan 302002",\n      "price": "₹500 per night (dorm) / ₹1200 per night (private room) (approx.)",\n      "imageUrl": "https://example.com/moustachehostel.jpg",\n      "geoCoordinates": {\n        "latitude": 26.9145,\n        "longitude": 75.8154\n      },\n      "rating": 4.5,\n      "description": "A social hostel with a vibrant atmosphere, offering both dorm beds and private rooms."\n    },\n    {\n      "hotelName": "Zostel Jaipur",\n      "address": "114, 115, Hathroi Fort, Nahargarh Road, Brahampuri, Jaipur, Rajasthan 302002",\n      "price": "₹600 per night (dorm) / ₹1500 per night (private room) (approx.)",\n      "imageUrl": "https://example.com/zosteljaipur.jpg",\n      "geoCoordinates": {\n        "latitude": 26.9079,\n        "longitude": 75.8234\n      },\n      "rating": 4.6,\n      "description": "Another popular hostel chain in India, known for its comfortable accommodations and social events."\n    }\n    // Add more hotels as needed...\n  ],\n  "itinerary": {\n    "day1": {\n      "bestTimeToVisit": "Morning",\n      "places": [\n        {\n          "placeName": "Amber Fort",\n          "details": "A majestic hilltop fort with stunning architecture and panoramic views. Don\'t miss the Sheesh Mahal (Mirror Palace).",\n          "imageUrl": "https://example.com/amberfort.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9855,\n            "longitude": 75.8513\n          },\n          "ticketPrice": "₹50 for Indians / ₹500 for Foreigners (approx.)",\n          "timeToTravel": "30-45 minutes from Jaipur city center"\n        },\n        {\n          "placeName": "Jal Mahal (Water Palace)",\n          "details": "A picturesque palace seemingly floating in the middle of Man Sagar Lake. Enjoy the views from the shore.",\n          "imageUrl": "https://example.com/jalmahal.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9383,\n            "longitude": 75.8343\n          },\n          "ticketPrice": "Entry is restricted; enjoy views from the shore.",\n          "timeToTravel": "15-20 minutes from Amber Fort"\n        },\n        {\n          "placeName": "Hawa Mahal (Wind Palace)",\n          "details": "An iconic palace with a unique honeycomb-like facade, designed for royal ladies to observe street life.",\n          "imageUrl": "https://example.com/hawamahal.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9239,\n            "longitude": 75.8267\n          },\n          "ticketPrice": "₹50 for Indians / ₹250 for Foreigners (approx.)",\n          "timeToTravel": "15-20 minutes from Jal Mahal"\n        },\n        {\n          "placeName": "City Palace",\n          "details": "A sprawling palace complex with museums, courtyards, and gardens showcasing royal heritage.",\n          "imageUrl": "https://example.com/citypalace.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9263,\n            "longitude": 75.8231\n          },\n          "ticketPrice": "₹300 for Indians / ₹700 for Foreigners (approx.)",\n          "timeToTravel": "5-10 minutes from Hawa Mahal"\n        },\n        {\n          "placeName": "Jantar Mantar",\n          "details": "An astronomical observatory with impressive instruments for measuring time and celestial positions.",\n          "imageUrl": "https://example.com/jantarmantar.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9249,\n            "longitude": 75.8245\n          },\n          "ticketPrice": "₹200 for Indians / ₹500 for Foreigners (approx.)",\n          "timeToTravel": "Adjacent to City Palace"\n        }\n      ]\n    },\n    "day2": {\n      "bestTimeToVisit": "Morning",\n      "places": [\n        {\n          "placeName": "Nahargarh Fort",\n          "details": "Another hilltop fort offering panoramic city views, especially stunning at sunset.",\n          "imageUrl": "https://example.com/nahargarhfort.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9393,\n            "longitude": 75.8447\n          },\n          "ticketPrice": "₹50 for Indians / ₹200 for Foreigners (approx.)",\n          "timeToTravel": "30-45 minutes from Jaipur city center"\n        },\n        {\n          "placeName": "Jaigarh Fort",\n          "details": "Connected to Nahargarh Fort, this fort houses the Jaivana cannon, one of the world\'s largest.",\n          "imageUrl": "https://example.com/jaigarhfort.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9475,\n            "longitude": 75.8369\n          },\n          "ticketPrice": "₹100 for Indians / ₹300 for Foreigners (approx.)",\n          "timeToTravel": "15-20 minutes from Nahargarh Fort"\n        },\n        {\n          "placeName": "Panna Meena ka Kund",\n          "details": "An ancient stepwell with intricate geometric patterns, a great spot for photography.",\n          "imageUrl": "https://example.com/pannameenakakund.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9414,\n            "longitude": 75.8347\n          },\n          "ticketPrice": "Free entry",\n          "timeToTravel": "10-15 minutes from Jaigarh Fort"\n        }\n      ]\n    },\n    "day3": {\n      "bestTimeToVisit": "Morning",\n      "places": [\n        {\n          "placeName": "Galtaji Temple (Monkey Temple)",\n          "details": "A unique temple complex built into a narrow mountain pass, home to many monkeys.",\n          "imageUrl": "https://example.com/galtajitemple.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9704,\n            "longitude": 75.8570\n          },\n          "ticketPrice": "Free entry",\n          "timeToTravel": "30-45 minutes from Jaipur city center"\n        },\n        {\n          "placeName": "Albert Hall Museum",\n          "details": "Jaipur\'s oldest museum, housing a diverse collection of artifacts, paintings, and sculptures.",\n          "imageUrl": "https://example.com/alberthallmuseum.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9079,\n            "longitude": 75.8172\n          },\n          "ticketPrice": "₹40 for Indians / ₹300 for Foreigners (approx.)",\n          "timeToTravel": "30-45 minutes from Galtaji Temple"\n        },\n        {\n          "placeName": "Local Markets (Bapu Bazaar, Johari Bazaar)",\n          "details": "Explore vibrant markets for souvenirs, textiles, jewelry, and traditional Rajasthani crafts.",\n          "imageUrl": "https://example.com/bapubazaar.jpg",\n          "geoCoordinates": {\n            "latitude": 26.9245,\n            "longitude": 75.8228\n          },\n          "ticketPrice": "Free entry",\n          "timeToTravel": "15-20 minutes from Albert Hall Museum"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Explanation of the Structure:**\n\n* **`trip_details`:**  Provides a high-level overview of your trip preferences.\n* **`hotels`:**  This section lists hotel suggestions. Each hotel object includes:\n    * `hotelName`: The name of the hotel.\n    * `address`: The complete address.\n    * `price`: An estimated price range per night. \n    * `imageUrl`:  A URL for a representative image (replace with actual image URLs).\n    * `geoCoordinates`: Latitude and longitude for mapping.\n    * `rating`: A typical rating (out of 5) to gauge quality.\n    * `description`: A brief summary of the hotel.\n* **`itinerary`:** This is your day-by-day travel plan:\n    * Each day (`day1`, `day2`, `day3`) has a `bestTimeToVisit` suggestion.\n    * Inside each day, `places` lists the attractions:\n        * `placeName`: Name of the attraction.\n        * `details`: A short description of what makes it interesting.\n        * `imageUrl`: URL for an image (replace with actual image URLs).\n        * `geoCoordinates`:  For mapping and location.\n        * `ticketPrice`: Estimated entry fees (note: prices can vary).\n        * `timeToTravel`: An estimated travel time from the previous place or city center.\n\n**How to Use This Plan:**\n\n1. **Book Your Accommodation:** Choose a hotel from the provided list that fits your budget and preferences.\n2. **Follow the Daily Itinerary:**  Use the suggested order of places within each day. Adjust timings based on your interests and travel pace.\n3. **Navigation and Mapping:** Use the `geoCoordinates` to find your way around using a mapping app. \n4. **Enjoy Flexibility:** Treat this itinerary as a guideline. Feel free to spend more time at places you love or add other attractions that catch your eye!\n\n**Remember:** \n\n* Prices are approximate and can change.\n* Verify ticket costs and timings on official websites before your visit. \n* Consider transportation options within Jaipur (rickshaws, taxis, app-based cabs) and factor in travel time accordingly. \n\nHave a fantastic trip to Jaipur! \n',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
